alias: Dimmer up while on
initial_state: 'on'
trigger:
  - platform: state
    entity_id: sensor.dimmer_switch_action
    to: 'up-press'
condition:
  - condition: state
    entity_id: light.living_room_table
    state: 'on'
action:
  # Make it brighter
  - service: light.turn_on
    data:
      entity_id: light.living_room_table
      brightness: >-
        {% set current = state_attr('light.living_room_table','brightness')|int %}
        {% set step = states('input_number.light_step')|int %}
        {% set next = current + step %}
        {% if next > states('input_number.light_maximum')|int %}
          {% set next = states('input_number.light_maximum')|int %}
        {% endif %}
        {{ next }}
